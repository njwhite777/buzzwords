<md-content layout="row" layout-xs="column">
  <div flex=50 class="text" layout-margin>
    <div class="text-med"> Choose a Game </div>
    <div>
      <div class="md-accordion" ng-repeat="game in gameServiceData.games">
        <div md-theme="{{dynamicTheme}}" md-theme-watch>
        <md-toolbar class="md-primary"ng-init="game.expanded = false" ng-click="collapseAll(game)">
          <div class="md-toolbar-tools">
            <div class="text-medsmall"> {{ game.name }} </div>
            <span flex=""></span>
            <span ng-class="{expandCollapse:true, active:game.expanded}"></span>
          </div>
        </md-toolbar>
        </div>
        <div ng-class="{dataContent:true, activeContent:game.expanded}">
          <md-content layout="row" ng-repeat="team in game.teams" >
            <div flex class="text-medsmall">
              <div layout="row" layout-align="start" class="text-medsmall">
                {{ team.name }}
              </div>
            </div>
            <div flex >
              <div layout="row" layout-align="center center">Current Players: {{ team.playerCount + '/' + team.maxPlayers }}</div>
            </div>
            <div flex>
              <div layout="row" layout-align="end">
                <md-button style="width: 70px;" class="md-secondary md-raised" ng-disabled="team.disableTeamJoin" ng-click="joinButton(game,team)">Join</md-button>
              </div>
            </div>
          </md-content>
        </div>
      </div>
    </div>
  </div>
  <div layout = "column">
  <div flex=33 layout-margin>
  <form name="createGameForm" novalidate ng-submit="createGameForm.$valid && gameStateValid()">
    <!-- TODO: frontend form validation! --> layout-xs="column"
    <div class="text-med">Create a Game</div>
    <div layout="row" layout-sm="column">
    <md-input-container class="md-block" flex-gt-sm>
      <label>Game Name</label>
      <input ng-model="gameData.name" ng-change="formFieldChanged(gameData.name)" ng-model-options='{ debounce: 1000 }'>
    </md-input-container>

    <md-input-container class="md-block" flex-gt-sm>
      Number of Teams <input id="gameData.numberOfTeams" type = "number" ng-model ="gameData.numberOfTeams" ng-change="forceBack(gameData,'numberOfTeams',5,1)" ng-model-options='{debounce:1000}'>
    </md-input-container>
  </div>
    <md-list>
      <md-list-item>
      <md-input-container ng-repeat= "team in gameData.teamData" ng-click="" class="">
        <input placeholder="{{ team.prettyName }}" name="{{ team.prettyName }}" ng-model="team.name" ng-change="formFieldChanged(team.name)" ng-model-options='{ debounce: 1000 }'>
      </md-input-container>
    </md-list>

    <md-input-container class="md-block" flex-gt-sm> Join Team at Start:
    <md-select  placeholder="Choose Starting Team" ng-model="gameData.initiatorTeam">
      <md-option ng-value="team" ng-repeat="team in gameData.teamData" ng-selected="$first">{{ team.name }}</md-option>
    </md-select>
  </md-input-container>

  <md-input-container class="md-block" flex-gt-sm>
    Max Players/Team <input id="gameData.maxPlayersPerTeam" type = "number" ng-change="forceBack(gameData,'maxPlayersPerTeam',6,2);formFieldChanged(gameData.maxPlayersPerTeam)" ng-model-options='{debounce:1000}'  ng-model ="gameData.maxPlayersPerTeam">
  </md-input-container>

  <!-- <md-input-container class="md-block" flex-gt-sm>
    Turn Duration <input id="gameData.roundDuration" type = "number" ng-change="formFieldChanged()" ng-model ="gameData.turnDuration">
  </md-input-container> -->

  <md-input-container class="md-block" flex-gt-sm> Turn Duration
  <md-select  placeholder="Turn Duration" ng-change="getData();formFieldChanged(gameData.turnDuration)" ng-model="gameData.turnDuration">
    <md-option ng-value="opt" ng-repeat="opt in turnDurationOptions" >{{ opt }}</md-option>
  </md-select>
  </md-input-container>

<md-input-container class="md-block" flex-gt-sm> Free Skips
<md-select  placeholder="Free Skips" ng-change="getData();formFieldChanged(gameData.skipPenaltyAfter)" ng-model="gameData.skipPenaltyAfter">
  <md-option ng-value="opt" ng-repeat="opt in skipOptions" >{{ opt }}</md-option>
</md-select>
</md-input-container>



    <md-input-container class="md-block" flex-gt-sm>
      Game Changers:
      <md-checkbox ng-model="gameData.gameChangers" aria-label="With Turn Modifiers"></md-checkbox>
    </md-input-container>

    <md-button type="submit" ng-disabled="!gameCreateData.showGameStartButton" ng-click="initiateGameButton()" class = "md-fab" aria-label="Create">
      <i class="material-icons">add</i>
    </md-button>
  </form>
</div>
<div flex=33>
</div>
</div>
</md-content>
